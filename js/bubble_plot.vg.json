{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "data": {
      "url": "../data/CityPair_Clean.csv"
    },
    "width": 800,
    "height": 200,
    "layer": [
      {
        "mark": {
          "type": "circle",
          "opacity": 0.8,
          "stroke": "black",
          "strokeWidth": 1
        },
        "transform": [
          {
            "calculate": "year(datum.Month)",
            "as": "Year"
          }
        ],
        "encoding": {
          "x": {
            "timeUnit": "year",
            "field": "Month",
            "type": "temporal",
            "axis": {
              "grid": false,
              "format": "%Y",
              "title": "",
              "tickCount": {"interval": "year", "step": 1}
            }
          },
          "y": {
            "field": "Port Region",
            "type": "nominal",
            "sort": {"op": "sum", "field": "OutSeatsMax", "order": "descending"},
            "axis": {"title": "", "grid": true, "labelPadding": 10}
          },
          "size": {
            "aggregate": "sum",
            "field": "OutSeatsMax",
            "type": "quantitative",
            "title": "Annual Passengers",
            "legend": {"clipHeight": 20},
            "scale": {"rangeMax": 1500}
          },
          "color": {"field": "NONE", "type": "nominal", "legend": null}
        }
      },
      {
        "mark": "rule",
        "encoding": {
          "x": {
            "datum": 1577797200000,
            "type": "temporal",
            "title": "Reference Line"
          },
          "color": {"value": "red"},
          "size": {"value": 0.01},
          "strokeDash": {"value": [2, 2]},
          "text": {"value": "Year 2020"}
        }
      },
      {
        "mark": {
          "type": "text",
          "align": "left",
          "baseline": "middle",
          "dx": 5
        },
        "encoding": {
          "x": {"datum": 1577797200000,
          "type": "temporal"},
          "text": {"value": "COVID-19"},
          "color": {"value": "red"}
        }
      }
    ]
  }
  